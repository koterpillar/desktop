#!/bin/bash

set -euo pipefail

source "$(dirname "$0")/functions.sh"

if [ "$OS" = "macos" ]
then
    DHALL_OS='let OS = ./common/OS.dhall in OS.Macos'
else
    DHALL_OS='let OS = ./common/OS.dhall in OS.Linux'
fi
export DHALL_OS

# Config interpolation
dhall-to-json < config/karabiner/karabiner.dhall > config/karabiner/karabiner.json
