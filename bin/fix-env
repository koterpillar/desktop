#!/bin/sh -e

setxkbmap -option altwin:swap_alt_win

has_connection () {
	nmcli --terse --fields name connection show --active | grep -v docker0 | sha1sum | grep -q $1
}

case $(hostname) in
	taohua|shancha)
		xrandr --auto
		if xrandr | grep -q "HDMI1 connected"
		then
			xrandr --output HDMI1 --primary --above LVDS1 --auto
			pactl set-card-profile 0 output:hdmi-stereo+input:analog-stereo
		elif xrandr | grep -q "HDMI2 connected"
		then
			xrandr --output HDMI2 --primary --above LVDS1 --auto
			pactl set-card-profile 0 output:hdmi-stereo-extra1+input:analog-stereo
		elif xrandr | grep -q "DP1 connected"
		then
			xrandr --output DP1 --primary --above LVDS1 --auto
			pactl set-card-profile 0 output:analog-stereo+input:analog-stereo
		elif xrandr | grep -q "VGA1 connected"
		then
			if has_connection 81340f1c782c190b9c45e8967a63581f0451fb01
			then
				xrandr --output VGA1 --primary --left-of LVDS1 --auto
				xrandr --output LVDS1 --pos 1920x432
				pactl set-card-profile 0 output:analog-stereo+input:analog-stereo
			else
				xrandr --output VGA1 --primary --above LVDS1 --auto
				pactl set-card-profile 0 output:analog-stereo+input:analog-stereo
			fi
		else
			pactl set-card-profile 0 output:analog-stereo+input:analog-stereo
		fi
		if has_connection 503314a033141b4654c78cca5d4bfe59fcbe6dc0 || \
			has_connection 81340f1c782c190b9c45e8967a63581f0451fb01
		then
			pactl set-sink-mute alsa_output.pci-0000_00_1b.0.analog-stereo 1
		fi
	;;
esac

if [ -f ~/.fehbg ]
then
	. ~/.fehbg
fi
